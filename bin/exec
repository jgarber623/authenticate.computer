#!/usr/bin/env bash

set -e

cmd=$*

container_name="authenticate.computer"
container_id=$(docker ps --no-trunc --filter ancestor=${container_name} --format {{.ID}})

if [ -z "$cmd" ]; then
  echo "[ bin/exec ] 🚨 No command specified! Try running '$0 whoami'."
  exit 1
fi

if [ -z $container_id ]; then
  echo "[ bin/exec ] 🚨 Couldn't find a container with name = $container_name. Have you run bin/start in another Terminal?"
  exit 1
else
  echo "[ bin/exec ] 🏃🏻‍♂️ Running '$cmd' inside container with ID = $container_id..."
  docker exec -it $container_id $cmd
fi
